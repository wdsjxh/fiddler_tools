(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6003614e"],{"458d":function(t,a,n){},"8dc6":function(t,a,n){},"8f21":function(t,a,n){},9406:function(t,a,n){"use strict";n.r(a);var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return t.user_flag?n("div",{staticClass:"dashboard-container"},[n(t.currentRole,{tag:"component",attrs:{"data-packet-count":t.data_packet_count,"vulnerable-count":t.vulnerable_count,"project-count":t.project_count,"data-month-count":t.data_month_count,"vulnerable-month-count":t.vulnerable_month_count,"normal-month-count":t.normal_month_count}})],1):n("div",{staticClass:"dashboard-container"},[n(t.currentRole,{tag:"component",attrs:{"data-packet-count":t.data_packet_count,"vulnerable-count":t.vulnerable_count,"project-count":t.project_count,"user-count":t.user_count,"data-month-count":t.data_month_count,"vulnerable-month-count":t.vulnerable_month_count,"normal-month-count":t.normal_month_count}})],1)},o=[],r=n("5530"),l=(n("b0c0"),n("caad"),n("2532"),n("2f62")),i=function(){var t=this,a=t.$createElement,n=t._self._c||a;return t.dataPacketCount?n("div",{staticClass:"dashboard-editor-container"},[n("panel-group",{attrs:{"data-packet-count":t.dataPacketCount,"vulnerable-count":t.vulnerableCount,"project-count":t.projectCount,"user-count":t.userCount},on:{handleSetLineChartData:t.handleSetLineChartData}}),n("el-row",{staticStyle:{background:"#fff",padding:"16px 16px 0","margin-bottom":"32px"}},[t.dataMonthCount?n("div",{staticClass:"chart-container"},[n("mix-chart",{attrs:{height:"100%",width:"100%","data-month-count":t.dataMonthCount,"vulnerable-month-count":t.vulnerableMonthCount,"normal-month-count":t.normalMonthCount}})],1):t._e()])],1):t._e()},s=[],u=(n("a9e3"),function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[n("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[n("div",{staticClass:"card-panel",on:{click:function(a){return t.handleSetLineChartData("New Visits")}}},[n("div",{staticClass:"card-panel-icon-wrapper icon-people"},[n("svg-icon",{attrs:{"icon-class":"peoples","class-name":"card-panel-icon"}})],1),n("div",{staticClass:"card-panel-description"},[n("div",{staticClass:"card-panel-text"},[t._v(" 所有数据包 ")]),n("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.dataPacketCount,duration:2600}})],1)])]),n("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[n("div",{staticClass:"card-panel",on:{click:function(a){return t.handleSetLineChartData("Messages")}}},[n("div",{staticClass:"card-panel-icon-wrapper icon-message"},[n("svg-icon",{attrs:{"icon-class":"people","class-name":"card-panel-icon"}})],1),n("div",{staticClass:"card-panel-description"},[n("div",{staticClass:"card-panel-text"},[t._v(" 漏洞数据包 ")]),n("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.vulnerableCount,duration:3e3}})],1)])]),n("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[n("div",{staticClass:"card-panel",on:{click:function(a){return t.handleSetLineChartData("Purchases")}}},[n("div",{staticClass:"card-panel-icon-wrapper icon-money"},[n("svg-icon",{attrs:{"icon-class":"chart","class-name":"card-panel-icon"}})],1),n("div",{staticClass:"card-panel-description"},[n("div",{staticClass:"card-panel-text"},[t._v(" 项目 ")]),n("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.projectCount,duration:3200}})],1)])]),t.checkPermission(["admin","super-admin"])?n("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[n("div",{staticClass:"card-panel",on:{click:function(a){return t.handleSetLineChartData("shoppings")}}},[n("div",{staticClass:"card-panel-icon-wrapper icon-people"},[n("svg-icon",{attrs:{"icon-class":"user","class-name":"card-panel-icon"}})],1),n("div",{staticClass:"card-panel-description"},[n("div",{staticClass:"card-panel-text"},[t._v(" 用户 ")]),n("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.userCount,duration:3600}})],1)])]):t._e()],1)}),c=[],d=n("ec1b"),h=n.n(d),p=n("4360");function m(t){if(t&&t instanceof Array&&t.length>0){var a=p["a"].getters&&p["a"].getters.roles,n=t,e=a.some((function(t){return n.includes(t)}));return e}return!1}var f={components:{CountTo:h.a},props:{dataPacketCount:{type:Number,default:666},vulnerableCount:{type:Number,default:666},projectCount:{type:Number,default:666},userCount:{type:Number,default:666}},data:function(){return{}},methods:{checkPermission:m,handleSetLineChartData:function(t){this.$emit("handleSetLineChartData",t)}}},C=f,b=(n("b050"),n("2877")),v=Object(b["a"])(C,u,c,!1,null,"c3f5ef88",null),y=v.exports,_=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{class:t.className,style:{height:t.height,width:t.width},attrs:{id:t.id}})},M=[],g=n("313e"),x=n.n(g);n("53ca"),n("ac1f"),n("5319"),n("4d63"),n("25f0"),n("d3b7"),n("4d90"),n("1276"),n("159b");function w(t,a,n){var e,o,r,l,i,s=function s(){var u=+new Date-l;u<a&&u>0?e=setTimeout(s,a-u):(e=null,n||(i=t.apply(r,o),e||(r=o=null)))};return function(){for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];r=this,l=+new Date;var d=n&&!e;return e||(e=setTimeout(s,a)),d&&(i=t.apply(r,u),r=u=null),i}}var D={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){this.initListener()},activated:function(){this.$_resizeHandler||this.initListener(),this.resize()},beforeDestroy:function(){this.destroyListener()},deactivated:function(){this.destroyListener()},methods:{$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},initListener:function(){var t=this;this.$_resizeHandler=w((function(){t.resize()}),100),window.addEventListener("resize",this.$_resizeHandler),this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},destroyListener:function(){window.removeEventListener("resize",this.$_resizeHandler),this.$_resizeHandler=null,this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)},resize:function(){var t=this.chart;t&&t.resize()}}},S={mixins:[D],props:{className:{type:String,default:"chart"},id:{type:String,default:"chart"},width:{type:String,default:"200px"},height:{type:String,default:"200px"},dataMonthCount:{type:Array,default:function(){return[]}},vulnerableMonthCount:{type:Array,default:function(){return[]}},normalMonthCount:{type:Array,default:function(){return[]}}},data:function(){return{chart:null,mydataMonthCount:this.dataMonthCount,myvulnerableMonthCount:this.vulnerableMonthCount,mynormalMonthCount:this.normalMonthCount}},watch:{dataMonthCount:{handler:function(t){this.mydataMonthCount=t},deep:!0},vulnerableMonthCount:{handler:function(t){this.myvulnerableMonthCount=t},deep:!0},normalMonthCount:{handler:function(t){this.mynormalMonthCount=t},deep:!0}},mounted:function(){this.initChart()},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},updated:function(){},methods:{initChart:function(){this.chart=x.a.init(document.getElementById(this.id));var t=function(){for(var t=[],a=1;a<13;a++)t.push(a+"month");return t}();this.chart.setOption({backgroundColor:"#344b58",title:{text:"年度漏洞数量与总量",x:"20",top:"20",textStyle:{color:"#fff",fontSize:"22"},subtextStyle:{color:"#90979c",fontSize:"16"}},tooltip:{trigger:"axis",axisPointer:{textStyle:{color:"#fff"}}},grid:{left:"5%",right:"5%",borderWidth:0,top:150,bottom:95,textStyle:{color:"#fff"}},legend:{x:"5%",top:"10%",textStyle:{color:"#90979c"},data:["漏洞数据包","正常数据包","所有数据包"]},calculable:!0,xAxis:[{type:"category",axisLine:{lineStyle:{color:"#90979c"}},splitLine:{show:!1},axisTick:{show:!1},splitArea:{show:!1},axisLabel:{interval:0},data:t}],yAxis:[{type:"value",splitLine:{show:!1},axisLine:{lineStyle:{color:"#90979c"}},axisTick:{show:!1},axisLabel:{interval:0},splitArea:{show:!1}}],dataZoom:[{show:!0,height:30,xAxisIndex:[0],bottom:30,start:10,end:80,handleIcon:"path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z",handleSize:"110%",handleStyle:{color:"#d3dee5"},textStyle:{color:"#fff"},borderColor:"#90979c"},{type:"inside",show:!0,height:15,start:1,end:35}],series:[{name:"漏洞数据包",type:"bar",stack:"total",barMaxWidth:35,barGap:"10%",itemStyle:{normal:{color:"rgba(255,144,128,1)",label:{show:!0,textStyle:{color:"#fff"},position:"insideTop",formatter:function(t){return t.value>0?t.value:""}}}},data:this.myvulnerableMonthCount},{name:"正常数据包",type:"bar",stack:"total",itemStyle:{normal:{color:"rgba(0,191,183,1)",barBorderRadius:0,label:{show:!0,position:"top",formatter:function(t){return t.value>0?t.value:""}}}},data:this.mynormalMonthCount},{name:"所有数据包",type:"line",stack:"total",symbolSize:10,symbol:"circle",itemStyle:{normal:{color:"rgba(252,230,48,1)",barBorderRadius:0,label:{show:!0,position:"top",formatter:function(t){return t.value>0?t.value:""}}}},data:this.mydataMonthCount}]})}}},k=S,L=Object(b["a"])(k,_,M,!1,null,null,null),j=L.exports,$={newVisitis:{expectedData:[100,120,161,134,105,160,165],actualData:[120,82,91,154,162,140,145]},messages:{expectedData:[200,192,120,144,160,130,140],actualData:[180,160,151,106,145,150,130]},purchases:{expectedData:[80,100,121,104,105,90,100],actualData:[120,90,100,138,142,130,130]},shoppings:{expectedData:[130,140,141,142,145,150,160],actualData:[120,82,91,154,162,140,130]}},z={name:"DashboardAdmin",components:{PanelGroup:y,MixChart:j},props:{dataPacketCount:{type:Number,default:666},vulnerableCount:{type:Number,default:666},projectCount:{type:Number,default:666},userCount:{type:Number,default:666},dataMonthCount:{type:Array,default:function(){return[]}},vulnerableMonthCount:{type:Array,default:function(){return[]}},normalMonthCount:{type:Array,default:function(){return[]}}},data:function(){return{lineChartData:$.newVisitis,mydataMonthCount:this.dataMonthCount,myvulnerableMonthCount:this.vulnerableMonthCount,mynormalMonthCount:this.normalMonthCount}},watch:{dataMonthCount:{handler:function(t){this.mydataMonthCount=t},deep:!0},vulnerableMonthCount:{handler:function(t){this.myvulnerableMonthCount=t},deep:!0},normalMonthCount:{handler:function(t){this.mynormalMonthCount=t},deep:!0}},updated:function(){},methods:{handleSetLineChartData:function(t){this.lineChartData=$[t]}}},A=z,E=(n("efbd"),Object(b["a"])(A,i,s,!1,null,"a0ed91ba",null)),N=E.exports,P=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"dashboard-editor-container"},[n("panel-group",{attrs:{"data-packet-count":t.dataPacketCount,"vulnerable-count":t.vulnerableCount,"project-count":t.projectCount},on:{handleSetLineChartData:t.handleSetLineChartData}}),n("el-row",{staticStyle:{background:"#fff",padding:"16px 16px 0","margin-bottom":"32px"}},[t.dataMonthCount?n("div",{staticClass:"chart-container"},[n("mix-chart",{attrs:{height:"100%",width:"100%","data-month-count":t.dataMonthCount,"vulnerable-month-count":t.vulnerableMonthCount,"normal-month-count":t.normalMonthCount}})],1):t._e()])],1)},H=[],O={newVisitis:{expectedData:[100,120,161,134,105,160,165],actualData:[120,82,91,154,162,140,145]},messages:{expectedData:[200,192,120,144,160,130,140],actualData:[180,160,151,106,145,150,130]},purchases:{expectedData:[80,100,121,104,105,90,100],actualData:[120,90,100,138,142,130,130]},shoppings:{expectedData:[130,140,141,142,145,150,160],actualData:[120,82,91,154,162,140,130]}},R={name:"DashboardAdmin",components:{PanelGroup:y,MixChart:j},watch:{dataMonthCount:{handler:function(t){this.mydataMonthCount=t},deep:!0},vulnerableMonthCount:{handler:function(t){this.myvulnerableMonthCount=t},deep:!0},normalMonthCount:{handler:function(t){this.mynormalMonthCount=t},deep:!0}},props:{dataPacketCount:{type:Number,default:666},vulnerableCount:{type:Number,default:666},projectCount:{type:Number,default:666},userCount:{type:Number,default:666},dataMonthCount:{type:Array,default:function(){return[]}},vulnerableMonthCount:{type:Array,default:function(){return[]}},normalMonthCount:{type:Array,default:function(){return[]}}},updated:function(){},data:function(){return{lineChartData:O.newVisitis,mydataMonthCount:this.dataMonthCount,myvulnerableMonthCount:this.vulnerableMonthCount,mynormalMonthCount:this.normalMonthCount}},methods:{handleSetLineChartData:function(t){this.lineChartData=O[t]}}},V=R,T=(n("9da2"),Object(b["a"])(V,P,H,!1,null,"7298aa69",null)),B=T.exports,G=n("c24f"),I={name:"Dashboard",components:{adminDashboard:N,userDashboard:B},data:function(){return{currentRole:"adminDashboard",listQuery:{},data_packet_count:null,vulnerable_count:null,project_count:null,user_count:null,user_flag:!1,data_month_count:[],vulnerable_month_count:[],normal_month_count:[]}},computed:Object(r["a"])({},Object(l["b"])(["roles"])),created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listQuery.username=this.$store.getters.name,this.listLoading=!0,Object(G["a"])(this.listQuery).then((function(a){t.roles.includes("admin")||t.roles.includes("super-admin")?t.user_count=a.data.user_count:(t.currentRole="userDashboard",t.user_flag=!0),t.data_packet_count=a.data.data_packet_count,t.vulnerable_count=a.data.vulnerable_count,t.project_count=a.data.project_count,t.data_month_count=a.data.data_month_count,t.vulnerable_month_count=a.data.vulnerable_month_count,t.normal_month_count=a.data.normal_month_count,t.listLoading=!1}))}}},Q=I,J=Object(b["a"])(Q,e,o,!1,null,null,null);a["default"]=J.exports},"9da2":function(t,a,n){"use strict";n("458d")},b050:function(t,a,n){"use strict";n("8dc6")},efbd:function(t,a,n){"use strict";n("8f21")}}]);