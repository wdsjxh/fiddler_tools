(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d97db6be"],{1:function(t,e){},2:function(t,e){},"21a6":function(t,e,i){(function(i){var a,n,s;(function(i,l){n=[],a=l,s="function"===typeof a?a.apply(e,n):a,void 0===s||(t.exports=s)})(0,(function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function a(t,e,i){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){r(a.response,e,i)},a.onerror=function(){},a.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function s(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(a){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var l="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof i&&i.global===i?i:void 0,o=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=l.saveAs||("object"!=typeof window||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(t,e,i){var o=l.URL||l.webkitURL,r=document.createElement("a");e=e||t.name||"download",r.download=e,r.rel="noopener","string"==typeof t?(r.href=t,r.origin===location.origin?s(r):n(r.href)?a(t,e,i):s(r,r.target="_blank")):(r.href=o.createObjectURL(t),setTimeout((function(){o.revokeObjectURL(r.href)}),4e4),setTimeout((function(){s(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,l){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,l),i);else if(n(t))a(t,i,l);else{var o=document.createElement("a");o.href=t,o.target="_blank",setTimeout((function(){s(o)}))}}:function(t,e,i,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof t)return a(t,e,i);var s="application/octet-stream"===t.type,r=/constructor/i.test(l.HTMLElement)||l.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&r||o)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=t:location=t,n=null},c.readAsDataURL(t)}else{var d=l.URL||l.webkitURL,f=d.createObjectURL(t);n?n.location=f:location.href=f,n=null,setTimeout((function(){d.revokeObjectURL(f)}),4e4)}});l.saveAs=r.saveAs=r,t.exports=r}))}).call(this,i("c8ba"))},3:function(t,e){},8647:function(t,e,i){},a73e:function(t,e,i){"use strict";i("8647")},ad8f:function(t,e,i){"use strict";i.d(e,"f",(function(){return n})),i.d(e,"b",(function(){return s})),i.d(e,"e",(function(){return l})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return r})),i.d(e,"d",(function(){return u}));var a=i("b775");function n(t){return Object(a["a"])({url:"/vulnerable_details_mul",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/data_packet_mul",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/vulnerable_config_mul",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/project_config_mul",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/add_rule_config",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/user_config_mul",method:"get",params:t})}},fe91:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",[i("span",[t._v("状态:")]),i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.search.type,callback:function(e){t.$set(t.search,"type",e)},expression:"search.type"}},[i("el-option",{attrs:{value:"启用"}},[t._v("启用")]),i("el-option",{attrs:{value:"禁用"}},[t._v("禁用")])],1)],1),i("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"搜索用户名"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.search.username,callback:function(e){t.$set(t.search,"username",e)},expression:"search.username"}}),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(" 查询 ")]),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v(" 添加 ")]),i("el-dialog",{staticStyle:{width:"70%"},attrs:{title:"添加配置内容",visible:t.add_dialogFormVisible},on:{"update:visible":function(e){t.add_dialogFormVisible=e}}},[i("el-form",{staticStyle:{width:"80%","margin-left":"50px"},attrs:{model:t.addform,"label-position":"","label-width":"90px"}},[i("el-form-item",{attrs:{label:"用户名",prop:"username"}},[i("el-input",{attrs:{readonly:t.readonly,placeholder:"请输入用户名"},model:{value:t.addform.username,callback:function(e){t.$set(t.addform,"username","string"===typeof e?e.trim():e)},expression:"addform.username"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{type:t.passwordType},model:{value:t.addform.password,callback:function(e){t.$set(t.addform,"password",e)},expression:"addform.password"}},[i("i",{staticClass:"el-input__icon el-icon-eye",attrs:{slot:"suffix"},on:{click:t.showPwd},slot:"suffix"},[i("svg-icon",{attrs:{"icon-class":"password"===t.passwordType?"eye":"eye-open"}})],1)])],1),i("el-form-item",{attrs:{label:"角色"}},[i("el-select",{attrs:{placeholder:"请选择类型"},model:{value:t.addform.roles,callback:function(e){t.$set(t.addform,"roles",e)},expression:"addform.roles"}},[i("el-option",{attrs:{label:"超级管理员",value:"super-admin"}}),i("el-option",{attrs:{label:"管理员",value:"admin"}}),i("el-option",{attrs:{label:"用户",value:"user"}})],1)],1),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-switch",{attrs:{"inactive-color":"#ff4949","active-value":"1","inactive-value":"0"},model:{value:t.addform.status,callback:function(e){t.$set(t.addform,"status",e)},expression:"addform.status"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.add_dialogFormVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("确 定")])],1)],1),i("el-dialog",{staticStyle:{width:"70%"},attrs:{title:"编辑配置内容",visible:t.edit_dialogFormVisible},on:{"update:visible":function(e){t.edit_dialogFormVisible=e}}},[i("el-form",{staticStyle:{width:"80%","margin-left":"50px"},attrs:{model:t.editform,"label-position":"","label-width":"90px"}},[i("el-form-item",{attrs:{label:"角色"}},[i("el-select",{attrs:{placeholder:"请选择类型"},model:{value:t.editform.roles,callback:function(e){t.$set(t.editform,"roles",e)},expression:"editform.roles"}},[i("el-option",{attrs:{label:"超级管理员",value:"super-admin"}}),i("el-option",{attrs:{label:"管理员",value:"admin"}}),i("el-option",{attrs:{label:"用户",value:"user"}})],1)],1),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-switch",{attrs:{"inactive-color":"#ff4949","active-value":"1","inactive-value":"0"},model:{value:t.editform.status,callback:function(e){t.$set(t.editform,"status",e)},expression:"editform.status"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.edit_dialogFormVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleEditSubmit}},[t._v("确 定")])],1)],1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"user_config_table",attrs:{id:"user_config_tableid",data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"ID",width:"95",prop:"id",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index)+" ")]}}])}),i("el-table-column",{attrs:{align:"center",label:"用户名",prop:"username",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("pre",[t._v(" "+t._s(e.row.username)+" ")])]}}])}),i("el-table-column",{attrs:{align:"center",label:"角色",prop:"role",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("pre",[t._v(" "+t._s(e.row.roles)+" ")])]}}])}),i("el-table-column",{attrs:{align:"center",label:"状态",prop:"status",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{size:"small",type:t._f("statusFilter")(e.row.valid)}},[t._v(t._s(e.row.valid))])]}}])}),i("el-table-column",{attrs:{align:"center",prop:"time",label:"抓包token有效期至",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"el-icon-time"}),i("span",[t._v(t._s(e.row.validtime))])]}}])}),i("el-table-column",{attrs:{align:"center",prop:"action",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),i("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":t.pagesize,"page-size":t.listQuery.limit,layout:"total,prev,pager,next,jumper,sizes",total:t.total},on:{"update:currentPage":function(e){return t.$set(t.listQuery,"page",e)},"update:current-page":function(e){return t.$set(t.listQuery,"page",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},n=[],s=(i("d3b7"),i("25f0"),i("ac1f"),i("5319"),i("b0c0"),i("841c"),i("ad8f")),l=i("21a6"),o=i.n(l),r=i("1146"),u=i.n(r),c={name:"Scanconfig",filters:{statusFilter:function(t){var e={"启用":"success","禁用":"danger"};return e[t]},statusChange:function(t){var e={1:"启用",0:"禁用"};return e[t]}},data:function(){return{tip_data:"新建扫描配置",all_config_name:[],list:null,readonly:!1,passwordType:"password",pageList:[],currentPage:1,total:0,listLoading:!0,pagelimit:2,tmpList:[],listQuery:{page:1,limit:15},add_dialogFormVisible:!1,edit_dialogFormVisible:!1,formLabelWidth:"120px",addform:{roles:null,status:null},editform:{username:null,roles:null,status:null},command:{id:null,config:null},pagesize:[10,15,20],search:{type:null,username:null},edit_save_flag_list:[],temppage:null,templimit:null,bind_config:{id:null,username:null}}},created:function(){this.fetchData(),this.init_edit_save_flag_list()},methods:{handleDropdown:function(t){this.$message("您已选择配置："+t.config.toString()),this.bind_config.id=t.id.toString(),this.bind_config.username=t.config.toString(),this.listQuery.bind_config=this.bind_config,this.fetchData()},handleClick:function(){this.$message("跳转到扫描规则配置"),this.$router.replace("/project_config/rule_config")},init_edit_save_flag_list:function(){this.edit_save_flag_list=new Array(this.listQuery.limit)},fetchData:function(){var t=this;this.listQuery.username=this.$store.getters.name,this.listQuery.token=this.$store.getters.token,this.listLoading=!0,Object(s["d"])(this.listQuery).then((function(e){t.list=e.data.items,t.all_config_name=e.data.all_config_name,t.total=e.data.total,t.listLoading=!1}))},downloadData:function(){var t=this;this.listLoading=!0,Object(s["d"])(this.listQuery).then((function(e){t.list=e.data.items,t.total=e.data.total,t.exportXLSX(),t.listQuery.page=t.temppage,t.listQuery.limit=t.templimit,t.fetchData(),t.listLoading=!1}))},check_scan_status:function(t,e){},handleDownload:function(){this.temppage=this.listQuery.page,this.templimit=this.listQuery.limit,this.listQuery.page=1,this.listQuery.limit=99999999,this.downloadData()},exportXLSX:function(){var t=u.a.utils.json_to_sheet(this.list),e=u.a.utils.book_new();return u.a.utils.book_append_sheet(e,t,"sheetname"),u.a.writeFile(e,"filename.xlsx")},exportExcel:function(){var t=u.a.utils.table_to_book(document.querySelector(".el-table")),e=u.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{o.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"sheetjs.xlsx")}catch(i){}return e},handleCreate:function(){this.add_dialogFormVisible=!0,this.edit_dialogFormVisible=!1},handleAdd:function(){this.listQuery.add=JSON.stringify(this.addform),this.addform.roles=null,this.addform.status=null,this.add_dialogFormVisible=!1,this.fetchData()},handleEdit:function(t,e){this.editform.username=e.username,this.edit_dialogFormVisible=!0,this.add_dialogFormVisible=!1},handleEditSubmit:function(){this.listQuery.edit=JSON.stringify(this.editform),this.editform.roles=null,this.editform.status=null,this.edit_dialogFormVisible=!1,this.fetchData()},handleDelete:function(t,e){this.listQuery.delete_user=e.username,this.fetchData()},handleSizeChange:function(t){this.listQuery.limit=t,this.fetchData()},handleCurrentChange:function(t){this.listQuery.page=t,this.fetchData()},handleFilter:function(){null!==this.search.type&&""!==this.search.type&&"none"!==this.search.type?this.listQuery.valid=this.search.type:this.listQuery.valid="0",null!==this.search.username&&""!==this.search.username?this.listQuery.myuser=this.search.username:this.listQuery.myuser="0",this.fetchData()},showPwd:function(){"password"===this.passwordType?this.passwordType="":this.passwordType="password"}}},d=c,f=(i("a73e"),i("2877")),p=Object(f["a"])(d,a,n,!1,null,"6ffb90ce",null);e["default"]=p.exports}}]);